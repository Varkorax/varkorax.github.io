<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="robots" content="noai, noimageai, noindex, nofollow" />
		
		<title>| Projects</title>
		<link rel="shortcut icon" type="image/x-icon" data-link="custom/favicon.svg" />
		
		<link rel="stylesheet" href="../custom/css/global.css" />
		<link rel="stylesheet" href="../custom/css/categories.css" />
		<!-- I'm sure it will never come back to bite me that I am reusing my own code wholesale wink wink -->
		<style>
			.content h1, h2, p {
				color: #ffffff !important;
			}
			/* Ensure project container lists rows vertically and fits the readable-panel */
			.button-container[role="list"] {
			  display: flex;
			  flex-direction: column;
			  gap: 12px;
			  width: 100%;
			  box-sizing: border-box;
			}

			/* Slightly reduce padding for the project's read button to match story look */
			.button-container .read-btn {
			  min-width: 96px;
			  padding: 8px 12px;
			}
			/* Make only the projects panel wider than the headline */
			.readable-panel.buttons-panel {
			  width: min(96%, 1200px);   /* expand width for project rows */
			  max-width: 1200px;        /* how wide the box can grow on large screens */
			  margin-left: auto;
			  margin-right: auto;
			  padding: 1.125rem 1.5rem; /* keep the readable-panel padding consistent */
			  box-sizing: border-box;
			}
			/* Allow the inner story-list to expand to the new panel width */
			.readable-panel.buttons-panel .story-list {
			  max-width: 100%;   /* let it use the full panel width */
			  width: 100%;
			  margin: 0;         /* panel already centers it */
			}
			.story-row {
			  display: flex;
			  flex-direction: row;
			  align-items: center;
			  gap: 16px;
			  background: rgba(42,42,42,0.55);
			  border-radius: 14px;
			  padding: 14px 18px;
			  width: 100%;
			  box-sizing: border-box;
			}

			/* fixed title column */
			.story-title { flex: 0 0 260px; font-weight: 600; margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

			/* blurb grows to fill remaining space */
			.story-blurb { flex: 1 1 auto; min-width: 0; }

			/* button pinned to right */
			.story-row .read-btn { flex: 0 0 120px; padding: 10px 16px; }
		</style>
	</head>

	<body>
		<!-- Changing Background -->
		<div id="background">
			<div class="bg-layer" id="bg1"></div>
			<div class="bg-layer" id="bg2"></div>
		</div>

		<!-- Top-left navigation (separators are explicit elements now) -->
		<nav id="topbar" aria-label="Primary">
			<a data-link="index.html" class="topbar-btn" data-tooltip="Home" aria-label="Home">
				<img data-src="./custom/img/side-home.png" alt="Home" />
			</a>

			<div class="topbar-sep" aria-hidden="true"></div>

			<a data-link="/pages/landing_stories.html" class="topbar-btn" data-tooltip="Writing" aria-label="Writing">
				<img data-src="./custom/img/side-quill.png" alt="Stories" />
			</a>

			<div class="topbar-sep" aria-hidden="true"></div>

			<button class="topbar-btn" aria-current="page" aria-label="Projects" disabled>
				<img src="../custom/img/side-game.png" alt="Home" />
			</button>
		</nav>

		<!-- Main content -->
		<main class="content" id="main-content">
		  <!-- Headline panel -->
		  <div class="readable-panel headline-panel">
			<h1 id="cat-title">Projects!</h1>
			<p id="cat-blurb">Here are some of my projects, past and present.</p>
		  </div>

		  <!-- Projects panel (boxed) -->
		  <div class="readable-panel buttons-panel" style="margin-top: 18px;">
			<div style="margin-bottom:12px; display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
			  <label style="display:flex; gap:8px; align-items:center;">
				<span style="font-size:0.95rem; opacity:0.92;">Sort</span>
				<select id="projects-sort" aria-label="Sort projects">
				  <option value="newest">Newest → Oldest</option>
				  <option value="oldest">Oldest → Newest</option>
				</select>
			  </label>
			  <label style="display:flex; gap:8px; align-items:center;">
				<span style="font-size:0.95rem; opacity:0.92;">Filter</span>
				<select id="projects-filter" aria-label="Filter projects">
				  <option value="all">All</option>
				  <option value="finished">Finished</option>
				  <option value="unfinished">Unfinished</option>
				</select>
			  </label>
			</div>

			<section class="story-list" id="story-list" aria-live="polite" aria-busy="true">
			  <!-- JS injects projects here -->
			</section>
		  </div>
		</main>

		<!-- Infobar (top-right) -->
		<nav id="infobar" aria-label="Site utilities">
			<!-- Settings button (moved to the right of the bell) -->
			<button
				id="settings-toggle"
				class="infobar-btn"
				aria-expanded="false"
				aria-controls="settings-popup"
				data-tooltip="Settings"
				title="Settings"
				>
				<img data-src="/custom/img/bottom-gear.png" alt="Settings" id="settings-icon" />
			</button>
			
			<div class="infobar-sep" aria-hidden="true"></div>
			
			<!-- Notifications (bell) — opens notifications modal -->
            <button
                id="notif-toggle"
                class="infobar-btn"
                aria-expanded="false"
                aria-controls="notif-popup"
                data-tooltip="Notifications"
                title="Notifications"
                ><a href="https://bsky.app/profile/varkorax.bsky.social">
                <img src="/custom/img/side-social-bsky.png" alt="Notifications" id="notif-icon" />
				</a>
            </button>

			<button
				id="info-toggle"
				class="infobar-btn"
				aria-expanded="false"
				aria-controls="info-popup"
				data-tooltip="Info"
				title="Info"
				>
				<img data-src="/custom/img/bottom-info.png" alt="Info" id="info-icon" />
			</button>
		</nav>

		<!-- SETTINGS POPUP (inlined) -->
		<div id="settings-popup" class="popup" role="dialog" aria-hidden="true" aria-label="Settings panel" aria-modal="true">
			<div class="popup-inner">
				<button class="popup-start visually-hidden" aria-label="Start of settings dialog">Start settings</button>
				<button class="popup-close" aria-label="Close settings panel">✕</button>

				<div class="popup-content">
					<!-- IFRAME: settings page -->
					<iframe
						src="settings.html"
						title="Settings"
						style="display:block; width:100%; height:100%; min-height:320px; border:0;"
						allow="clipboard-read; clipboard-write; geolocation; microphone; camera; autoplay"
						></iframe>

					<noscript>
						<div class="content small">
							<p>JavaScript is required to load the settings panel. <a class="bare-link" href="./pages/settings.html">Open settings</a></p>
						</div>
					</noscript>
				</div>

				<p class="popup-help">To close, click outside the window or press Escape.</p>
			</div>
		</div>

		<!-- INFO POPUP (inlined) -->
		<div id="info-popup" class="popup" role="dialog" aria-hidden="true" aria-label="Info panel" aria-modal="true">
			<div class="popup-inner">
				<button class="popup-start visually-hidden" aria-label="Start of info dialog">Start info</button>
				<button class="popup-close" aria-label="Close info panel">✕</button>

				<div class="popup-content">
					<!-- IFRAME: info page -->
					<iframe
						src="info.html"
						title="Info"
						style="display:block; width:100%; height:100%; min-height:320px; border:0;"
						allow="clipboard-read; clipboard-write; geolocation; microphone; camera; autoplay"
						></iframe>

					<noscript>
						<div class="content small">
							<p>JavaScript is required to load the info panel. <a class="bare-link" href="./pages/info.html">Open info</a></p>
						</div>
					</noscript>
				</div>

				<p class="popup-help">To close, click outside the window or press Escape.</p>
			</div>
		</div>
		
				<!-- Mature content overlay + modal -->
		<div id="mature-overlay" aria-hidden="true"></div>

		<!-- invisible toggle used to open the modal via openPopup(popup, toggle) -->
		<button id="mature-toggle" class="visually-hidden" aria-controls="mature-modal" aria-expanded="false">Open mature notice</button>

		<div id="mature-modal" class="popup" role="dialog" aria-label="Mature content notice" aria-hidden="true" aria-modal="true">
		  <div class="popup-inner">
			<button class="popup-start visually-hidden" aria-label="Start mature dialog">Start mature dialog</button>

			<div class="popup-content">
			  <div class="content" role="document" style="padding: 6px 6px 0 6px;">
				<h2 style="margin:0 0 8px 0;">Heads up!</h2>

				<p style="margin:0 0 12px 0; line-height:1.5;">
				  Annoying though it may be I have the obligation to give you the following disclaimer:<br><br>
				  
				  This site contains writing that may deal with mature themes such as:<br>
				  adult language,<br>
				  violence,<br>
				  complex relationships,<br>
				  or suggestive material.<br><br>
				  
				  It is not an adult entertainment site, but some stories may be unsuitable for minors.<br>
				  By entering you confirm you are of legal age in your jurisdiction.
				</p>

				<div style="margin-top:8px; display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
				  <label style="display:flex; align-items:center; gap:8px; font-size:0.95rem; cursor:pointer;">
					<input type="checkbox" id="mature-remember" />
					<span>Remember my choice on this device</span>
				  </label>
				</div>

				<div style="margin-top:14px; display:flex; gap:10px; align-items:center;">
				  <button id="mature-enter-btn" class="settings-btn" style="font-weight:700; min-width:130px;">Enter site</button>
				  <button id="mature-exit-btn" class="settings-btn" style="background:transparent; border:1px solid rgba(255,255,255,0.08); min-width:100px;">Exit</button>
				</div>

				<p style="margin-top:12px; font-size:0.88rem; opacity:0.92;">
				  If you'd rather not see mature content, click <strong>Exit</strong> to leave the site.
				</p>
			  </div>
			</div>

			<p class="popup-help" style="margin-top:8px; padding-top:0;">Use the buttons above to continue.</p>
		  </div>
		</div>

		<!-- Toast container -->
		<div id="toast-container" aria-live="polite" aria-atomic="true"></div>

		<script src="../custom/js/global.js" defer></script>
		<script src="../custom/js/projects.js" defer></script>
	</body>
</html>
